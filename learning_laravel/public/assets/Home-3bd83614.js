import{_,m as h,a as u,s as p,d as f,r as m,o as a,c as n,b as r,e as t,t as i,f as l,g as x,p as R,h as b,i as y,L as E}from"./index-bbb38536.js";import{b as T}from"./bitcoin.service-0e616d04.js";const L={data(){return{exchangeRate:null,isLoadingExchangeRate:!0}},created(){this.setExchangeRate()},computed:{...h(["user","transactions"]),userId(){return this.user._id},getRecentTransactions(){return this.transactions.slice(0,3)}},methods:{...u(["createTransaction"]),setExchangeRate(){this.isLoadingExchangeRate=!0,T.getRate().then(e=>{this.exchangeRate=e}).catch(e=>{console.log("Failed fetching exchange rate",e),p("Failed fetching exchange rate")}).finally(()=>{this.isLoadingExchangeRate=!1})},onTransfer(e,s,d){this.createTransaction({userId:e,contactId:s,amount:d})}},components:{TransactionList:f({loader:()=>y(()=>import("./TransactionList-4948e3e7.js"),["./TransactionList-4948e3e7.js","./index-bbb38536.js","./index-17816dae.css","./TransactionList-09b57832.css"],import.meta.url),loadingComponent:E})}},v=e=>(R("data-v-49467f9a"),e=e(),b(),e),I={class:"home-page full main-layout clr-gray-3"},k={key:0,class:"exchange-rate text-align-center fs18 mg-bl-20"},w={class:"fw600 fs25"},C={key:1,class:"greeting text-align-center fs20 mg-bl-st-20"},S={class:"fw600 fs25 clr-gold-0 capitalize"},V={key:2,class:"balance text-align-center fs18 flex justify-center gap-5 align-center"},N={class:"fw600 fs25 clr-gold-0"},A={class:"recent-transactions mg-bl-40 flex column align-center"},B=v(()=>t("p",{class:"fs20 underline"},"Recent transactions:",-1));function D(e,s,d,F,o,c){const g=m("TransactionList");return a(),n("section",I,[!o.isLoadingExchangeRate&&o.exchangeRate?(a(),n("p",k,[r("Exchange Rate: "),t("span",w,i(o.exchangeRate),1)])):l("",!0),e.user?(a(),n("p",C,[r("Welcome, "),t("span",S,i(e.user.name),1)])):l("",!0),e.user?(a(),n("section",V,[t("p",null,[r("Your balance: "),t("span",N,i(e.user.balance),1)]),t("section",null,[t("button",{class:"btn-refill",onClick:s[0]||(s[0]=H=>c.onTransfer(c.userId,null,20))},"Refill")])])):l("",!0),t("section",A,[B,x(g,{transactions:c.getRecentTransactions},null,8,["transactions"])])])}const z=_(L,[["render",D],["__scopeId","data-v-49467f9a"]]);export{z as default};
